<!DOCTYPE html>
<html lang="ko">

<head>
    <title>Main Page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <header>
        <a href="#"><img src="../../static/img/logo2.png" onclick="loadMainPage()"></a>
        <div class="container">
            <!-- 로그인 상태 확인용 -->
            <button id="isLoginBtn" onclick="checkLogin()">로그인 확인</button>
        </div>
        <div class="BtnContainer">
            <button type="button" id="loginBtn" onclick="goToLoginPage()">로그인</button>
            <button type="button" id="signinBtn" onclick="loadHTML('../../login/template/register.html')">회원가입</button>
            <button type="button" id="logoutBtn" onclick="logout()">로그아웃</button>
            <!-- 내 정보 페이지로 가는 버튼 -->
            <button type="button" id="myInfoBtn" onclick="loadHTML('../../myPage/template/myPage.html')">내 정보</button>
        </div>
        <hr>
    </header>

    <main id="content">
        <iframe id="page" src="../template/main_body.html" frameborder="0" width="100%" height="500"></iframe>
    </main>

    <footer>
        <hr>
        <br><br>
        <p align="center">조원 : 김성민 김유민 김희은 백성수 이채원 표동우</p>
        <br>
    </footer>

    <script>
        // 세션에서 로그인 상태 확인
        var isLogin = sessionStorage.getItem('isLogin');

        function loadHTML(filename) {
            var iframe = document.getElementById('page');
            iframe.src = filename;
        };

        function loadMainPage() {
            loadHTML('../../main/template/main_body.html');
        }

        function checkLogin() {
            if (isLogin === 'true') {
                console.log('로그인 상태입니다.');
            } else {
                console.log('로그인 상태가 아닙니다.');
            }
        }

        function goToLoginPage() {
            // 로그인 페이지로 이동합니다.
            loadHTML('../../login/template/login.html');
        }

        function logout() {
            // 세션에서 로그인 상태를 false로 변경합니다.
            sessionStorage.setItem('isLogin', 'false');
            // 버튼 상태를 업데이트합니다.
            updateButtons();
            console.log('로그아웃되었습니다.');
        }

        function updateButtons() {
            if (isLogin === 'true') {
                // 로그인 상태일 때는 로그아웃, 내 정보 버튼 보이고 로그인, 회원가입 버튼 숨김
                document.getElementById('loginBtn').style.display = 'none';
                document.getElementById('signinBtn').style.display = 'none';
                document.getElementById('logoutBtn').style.display = 'block';
                document.getElementById('myInfoBtn').style.display = 'block';
            } else {
                // 로그아웃 상태일 때는 로그인, 회원가입 버튼 보이고 로그아웃, 내 정보 버튼 숨김
                document.getElementById('loginBtn').style.display = 'block';
                document.getElementById('signinBtn').style.display = 'block';
                document.getElementById('logoutBtn').style.display = 'none';
                document.getElementById('myInfoBtn').style.display = 'none';
            }
        }

        // 페이지 로딩 시 버튼 상태 업데이트
        updateButtons();

        // 사용자가 로그인을 완료했을 때 호출되는 함수
        function loginSuccess() {
            // 세션에 로그인 상태를 true로 설정합니다.
            sessionStorage.setItem('isLogin', 'true');
            // 버튼 상태를 업데이트합니다.
            updateButtons();
            console.log('로그인되었습니다.');
        }
    </script>
</body>

</html>
